name: CI Tests

on: [pull_request, push]

jobs:
  bootstrap:
    name: Quick tests
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1

    - name: Bootstrap
      run: npx lerna bootstrap

    - name: Upload node_modules
      if: success()
      uses: actions/upload-artifact@v1
      with:
        name: node_modules
        path: node_modules

  check-types:
    name: Check types
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1

    - uses: actions/download-artifact@v1
      with:
        name: node_modules
        path: node_modules

    # - name: Check types
    -  run: npx lerna run check-types

    # - name: Lint
    #   run: npx lerna run lint

    # - name: Unit tests
    #   run: npx lerna run test:unit

    # - name: Coverage
    #   run: npx lerna run coverage

    # - name: E2e tests
    #   run: npx lerna run test:e2e

    # - name: Spec tests
    #   run: npx lerna run test:spec-min